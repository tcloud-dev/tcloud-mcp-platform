# MCP Context Forge - Development Environment
# Cluster: tbf8b9d (K8s v1.31.6)
# Namespace: mcp-dev

mcpContextForge:
  env:
    postgres:
      db: mcpforge
  replicaCount: 1

  image:
    pullPolicy: Always

  service:
    type: NodePort
    port: 80

  hpa:
    enabled: false

  ingress:
    enabled: true
    className: ""  # Empty to use external ingress (201.157.216.223), overrides internal from base values.yaml
    host: mcp-gateway.tbf8b9d.k8s.sp06.te.tks.sh
    path: /
    pathType: Prefix
    tls:
      enabled: false

  config:
    LOG_LEVEL: DEBUG
    GUNICORN_WORKERS: "2"

  # Override DATABASE_URL and REDIS_URL because $(VAR) syntax doesn't work with secretKeyRef
  # The helm chart uses $(POSTGRES_USER):$(POSTGRES_PASSWORD) but these come from secrets
  extraEnv:
    - name: DATABASE_URL
      value: "postgresql+psycopg://mcpforge:rdnRwSU2L2y3cYBnGhafg@mcp-stack-postgres:5432/mcpforge"
    - name: REDIS_URL
      value: "redis://mcp-stack-redis:6379/0"

  resources:
    requests:
      memory: "512Mi"
      cpu: "100m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

postgres:
  persistence:
    enabled: true
    storageClassName: "default-persistence"
    size: 5Gi
  credentials:
    database: mcpforge
    user: mcpforge
    # Password must match DATABASE_URL above and existing PVC data
    password: rdnRwSU2L2y3cYBnGhafg

redis:
  persistence:
    enabled: true
    storageClassName: "default-persistence"
    size: 1Gi

pgadmin:
  enabled: false

redisCommander:
  enabled: false

minio:
  enabled: false

mcpFastTimeServer:
  enabled: false
